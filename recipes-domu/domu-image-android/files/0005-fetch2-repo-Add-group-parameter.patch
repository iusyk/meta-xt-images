From ac82f99b3346458b19b829788ee42a2bf805c6da Mon Sep 17 00:00:00 2001
From: Usyk Ihor <ihor_usyk@epam.com>
Date: Fri, 13 Dec 2019 15:34:22 +0100
Subject: [PATCH] Add group parameter

Signed-off-by: Usyk Ihor <ihor_usyk@epam.com>
---
 bitbake/lib/bb/fetch2/repo.py | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

diff --git a/bitbake/lib/bb/fetch2/repo.py b/bitbake/lib/bb/fetch2/repo.py
index a60e82f358..8ba0e4ec2c 100644
--- a/bitbake/lib/bb/fetch2/repo.py
+++ b/bitbake/lib/bb/fetch2/repo.py
@@ -79,7 +79,11 @@ class Repo(FetchMethod):
             username = ""
         bb.utils.mkdirhier(ud.repodir)
         bb.fetch2.check_network_access(d, "repo init -m %s -b %s -u %s://%s%s%s" % (ud.manifest, ud.branch, ud.proto, username, ud.host, ud.path), ud.url)
-        runfetchcmd("repo init -m %s -b %s -u %s://%s%s%s" % (ud.manifest, ud.branch, ud.proto, username, ud.host, ud.path), d, workdir=ud.repodir)
+        prebuilds = d.getVar("DDK_UM_PREBUILDS") or ""
+        if prebuilds:
+            runfetchcmd("repo init -m %s -b %s -u %s://%s%s%s" % (ud.manifest, ud.branch, ud.proto, username, ud.host, ud.path), d, workdir=ud.repodir)
+        else:
+            runfetchcmd("repo init -m %s -b %s -u %s://%s%s%s -g %s" % (ud.manifest, ud.branch, ud.proto, username, ud.host, ud.path, "all"), d, workdir=ud.repodir)
 
         bb.fetch2.check_network_access(d, "repo sync %s" % ud.url, ud.url)
         self.sync(ud.repodir, d)
-- 
2.17.1

